name: Boiler Cron Debug

on:
  # Временно — каждые 5 минут
  schedule:
    - cron: "*/5 * * * *"
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest

    steps:
      - name: Show event name
        run: echo "Event: ${{ github.event_name }}"

      - name: Show time
        run: date -u

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: Install dependencies
        run: pip install requests

      - name: Run boiler script
        env:
          STOUT_LOGIN: ${{ secrets.STOUT_LOGIN }}
          STOUT_PASSWORD: ${{ secrets.STOUT_PASSWORD }}
        run: python boiler_api.py 8
